<!doctype html>

<head>
  <script src="http://localhost:8080/credentials.js"></script>
  <script src="http://localhost:8080/fractal.js"></script>
</head>

<body>
<input type="button" onclick="loadData()" value="load data"/>
<input type="button" onclick="deleteData()" value="delete data"/>
<div class="container">
  <div>
    <div class="placeholder" id="placeholder1"></div>
  </div>

  <div>
    <div class="placeholder" id="placeholder2"></div>
  </div>

  <div>
    <div class="placeholder" id="placeholder3"></div>
  </div>

  <div>
    <div class="placeholder" id="placeholder4"></div>
  </div>
</div>
</body>

<script>
  /* eslint-disable */

  const fjs = fractal.init({
    handler: 'ada',
    thisBaseURL: 'https://ada.parkinson.lu',
    fractalisBaseURL: 'http://127.0.0.1:5000',
    getAuth () {
      return credentials1
    }
  })
  function loadData () {
    fjs.loadData([
      {
        dictionary: {
          name: 'cadenceR',
          projection: 'cadenceR',
          label: 'Cadence Right',
          fieldType: 'Double',
          isArray: false
        },
        data_set: 'egait.features'
      },
      {
        dictionary: {
          name: 'cadenceL',
          projection: 'cadenceL',
          label: 'Cadence Left',
          fieldType: 'Double',
          isArray: false
        },
        data_set: 'egait.features'
      },
      {
        dictionary: {
          name: 'entropyR',
          projection: 'entropyR',
          label: 'Entropy Right',
          fieldType: 'Double',
          isArray: true
        },
        data_set: 'egait.features'
      },
      {
        dictionary: {
          name: 'entropyL',
          projection: 'entropyL',
          label: 'Entropy Left',
          fieldType: 'Double',
          isArray: true
        },
        data_set: 'egait.features'
      },

      {
        dictionary: {
          name: 'Geschlecht',
          projection: 'Geschlecht',
          label: 'Gender',
          fieldType: 'Enum',
          numValues: {"0":"female","1":"male"},
          isArray: false
        },
        data_set: 'denopa.clinical_baseline'
      },
      {
        dictionary: {
          name: 'a_CRF_Bildung',
          projection: 'a_CRF_Bildung',
          label: 'Education',
          fieldType: 'Enum',
          numValues: {"0":"High School Degree","1":"High School degree","2":"High school / elementary school","3":"Realschule / GCSE"},
          isArray: false
        },
        data_set: 'denopa.clinical_baseline'
      },
      {
        dictionary: {
          name: 'a_AESD_S_mean',
          projection: 'a_AESD_S_mean',
          label: 'AESD S Mean',
          fieldType: 'Double',
          isArray: false
        },
        data_set: 'denopa.clinical_baseline'
      },
      {
        dictionary: {
          name: 'a_AESD_I_mean',
          projection: 'a_AESD_I_mean',
          label: 'AESD I Mean',
          fieldType: 'Double',
          isArray: false
        },
        data_set: 'denopa.clinical_baseline'
      },
      {
        dictionary: {
          name: 'a_Alter',
          projection: 'a_Alter',
          label: 'Age',
          fieldType: 'Integer',
          isArray: false
        },
        data_set: 'denopa.clinical_baseline'
      }
    ])
  }

  function deleteData () {
    fjs.clearCache()
  }

  function setCharts () {
    fjs.setChart({chart: 'correlation-analysis', selector: '#placeholder1'})
    fjs.setChart({chart: 'boxplot', selector: '#placeholder2'})
    fjs.setChart({chart: 'heatmap', selector: '#placeholder3'})
    fjs.setChart({chart: 'pca-analysis', selector: '#placeholder4'})
  }

  function resize () {
    const container = document.querySelector('.container')
    container.style.height = document.documentElement.clientHeight + 'px'
    container.style.width = document.documentElement.clientWidth + 'px'
  }

  window.addEventListener('resize', resize)
  window.addEventListener('load', () => {
    resize()
    setCharts()
  })
</script>

<style>
  .container {
    width: 1000px;
    height: 1000px;
  }

  .container > div {
    width: 48%;
    height: 48%;
    float: left;
  }
</style>
